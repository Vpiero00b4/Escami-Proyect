<!-- Header Principal -->
<header class="header">
  <div class="header-container">
    <!-- BotÃ³n + Logo -->
    <div class="header-left">
      <button class="menu-btn" (click)="toggleSidebar()">
        @if (!isSidebarOpen) {
          <span>â˜°</span>
        } @else {
          <span>âœ–</span>
        }
      </button>
      <a routerLink="/" class="logo">ğŸ›ï¸ Marketplace</a>
    </div>

    <!-- Barra de bÃºsqueda -->
    <div class="search-bar">
      <input type="text" class="search-input" placeholder="Buscar productos..." />
      <button class="search-btn"><span class="icon">ğŸ”</span></button>
    </div>

    <!-- Acciones -->
    <div class="header-actions">
      <a routerLink="/login" class="header-btn">ğŸ‘¤ Iniciar SesiÃ³n</a>
      <a routerLink="/cart" class="header-btn cart-btn">
        ğŸ›’ Carrito
        <span class="cart-badge">3</span>
      </a>
    </div>
  </div>
</header>

<!-- Sidebar -->
<div class="sidebar" [class.open]="isSidebarOpen">
  <button class="close-btn" (click)="toggleSidebar()">âœ–</button>
  
  <ul class="sidebar-nav">
    <li><a routerLink="/" (click)="toggleSidebar()">ğŸ  Inicio</a></li>

    <!-- ğŸ“š LIBROS dinÃ¡mico -->
    <li class="dropdown">
      <div class="dropdown-header" (click)="toggleEmpresa('libros')">
        <span>ğŸ“š Libros</span>
        <span class="arrow" [class.open]="empresaAbierta === 'libros'">â–¶</span>
      </div>
      <ul class="dropdown-menu" *ngIf="empresaAbierta === 'libros'">
        <li *ngFor="let cat of categorias" class="dropdown-sub">
          <div class="sub-header" (click)="toggleCategoria(cat.idCategoria)">
            {{ cat.categoria1 }}
            <span class="arrow" [class.open]="categoriaAbierta === cat.idCategoria">â–¶</span>
          </div>
          <ul class="dropdown-submenu" *ngIf="categoriaAbierta === cat.idCategoria">
            <li *ngFor="let sub of getSubcategoriasByCategoria(cat.idCategoria)">
              <a [routerLink]="['/products/libros', cat.categoria1.toLowerCase(), sub.descripcion.toLowerCase()]"
                 (click)="toggleSidebar()">
                {{ sub.descripcion }}
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </li>

    <!-- ğŸ‘Ÿ Zapatillas -->
    <li class="dropdown">
      <div class="dropdown-header" (click)="toggleEmpresa('zapatillas')">
        <span>ğŸ‘Ÿ Zapatillas</span>
        <span class="arrow" [class.open]="empresaAbierta === 'zapatillas'">â–¶</span>
      </div>
      <ul class="dropdown-menu" *ngIf="empresaAbierta === 'zapatillas'">
        <li><a routerLink="/products/zapatillas/deportivas" (click)="toggleSidebar()">Deportivas</a></li>
        <li><a routerLink="/products/zapatillas/casual" (click)="toggleSidebar()">Casuales</a></li>
      </ul>
    </li>

    <!-- ğŸ¾ Mascotas -->
    <li class="dropdown">
      <div class="dropdown-header" (click)="toggleEmpresa('mascotas')">
        <span>ğŸ¾ Mascotas</span>
        <span class="arrow" [class.open]="empresaAbierta === 'mascotas'">â–¶</span>
      </div>
      <ul class="dropdown-menu" *ngIf="empresaAbierta === 'mascotas'">
        <li><a routerLink="/products/mascotas/alimentos" (click)="toggleSidebar()">Alimentos</a></li>
        <li><a routerLink="/products/mascotas/accesorios" (click)="toggleSidebar()">Accesorios</a></li>
        <li><a routerLink="/products/mascotas/juguetes" (click)="toggleSidebar()">Juguetes</a></li>
      </ul>
    </li>

    <!-- ğŸ›¡ï¸ Seguridad -->
    <li class="dropdown">
      <div class="dropdown-header" (click)="toggleEmpresa('seguridad')">
        <span>ğŸ›¡ï¸ Seguridad</span>
        <span class="arrow" [class.open]="empresaAbierta === 'seguridad'">â–¶</span>
      </div>
      <ul class="dropdown-menu" *ngIf="empresaAbierta === 'seguridad'">
        <li><a routerLink="/products/seguridad/camaras" (click)="toggleSidebar()">CÃ¡maras</a></li>
        <li><a routerLink="/products/seguridad/cerraduras" (click)="toggleSidebar()">Cerraduras</a></li>
        <li><a routerLink="/products/seguridad/alarmas" (click)="toggleSidebar()">Alarmas</a></li>
      </ul>
    </li>

    <li><a routerLink="/offers" (click)="toggleSidebar()">ğŸ”¥ Ofertas</a></li>
  </ul>
</div>

<!-- Overlay -->
@if (isSidebarOpen) {
  <div class="overlay" (click)="toggleSidebar()"></div>
}
